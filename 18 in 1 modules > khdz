#!name=üéØ KH-DZ Premium Unlock Pro
#!desc=‚ú® Unlock Premium 18 apps + Ch·∫∑n qu·∫£ng c√°o hi·ªáu qu·∫£

[General]
bypass-system = true
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12
dns-server = system, 1.1.1.1, 8.8.8.8
ipv6 = false
# Quan tr·ªçng: Lu√¥n c√≥ k·∫øt n·ªëi m·∫°ng
always-real-ip = *.apple.com, *.icloud.com

[MITM]
enable = true
hostname = 
*.googlevideo.com, 
www.youtube.com, 
s.youtube.com, 
youtubei.googleapis.com,
api.revenuecat.com,
buy.itunes.apple.com,
api-sub.meitu.com,
api.picsart.com,
api-mobile.soundcloud.com,
spclient.wg.spotify.com,
premium*.truecaller.com,
us-central1-alight-creative.cloudfunctions.net,
medi.dxzzy321.top,
*.bilibili.com,
*.vsco.co,
*.ezvizlife.com

[Script]
# ==================== YOUTUBE ====================
# YouTube Premium & No Ads (Ch·∫∑n qu·∫£ng c√°o m·∫°nh m·∫Ω)
youtube-premium = type=http-response,pattern=^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(player|browse|next|search),requires-body=1,script-path=https://raw.githubusercontent.com/NightmarketServer/Youtube-Premium/refs/heads/main/YouTubePremiumV3.5.module,timeout=15,tag=üì∫ YouTube Premium

# YouTube Ad Block b·ªï sung
youtube-ads = type=http-response,pattern=^https:\/\/www\.youtube\.com\/api\/stats\/ads,requires-body=1,script-path=https://raw.githubusercontent.com/yqc007/QuantumultX/master/YouTubeAds.js,timeout=10,tag=üö´ YouTube Ads

# ==================== SPOTIFY ====================
spotify-premium = type=http-response,pattern=^https:\/\/spclient\.wg\.spotify\.com\/(bootstrap\/v1\/bootstrap|user-customization-service),requires-body=1,script-path=https://raw.githubusercontent.com/NightmarketServer/Spotify/refs/heads/main/SpotifyPr4.module,timeout=10,tag=üéµ Spotify

# ==================== SOUNDCLOUD ====================
soundcloud-premium = type=http-response,pattern=^https:\/\/api-mobile\.soundcloud\.com\/configuration,requires-body=1,script-path=https://raw.githubusercontent.com/NightmarketServer/SoundCloudPlus/refs/heads/main/SoundcloudGo.module,timeout=10,tag=üé∂ SoundCloud

# ==================== PHOTO EDITORS ====================
picsart-premium = type=http-request,pattern=^https:\/\/api\.picsart\.com\/users\/me\/subscription,requires-body=1,script-path=https://raw.githubusercontent.com/NightmarketServer/Shadowrocket-Module/refs/heads/main/Module/Picsart%20Premium.module,timeout=10,tag=üñºÔ∏è PicsArt

vsco-premium = type=http-response,pattern=^https:\/\/api\.revenuecat\.com\/v1\/subscribers.*vsco,requires-body=1,script-path=https://raw.githubusercontent.com/NightmarketServer/Shadowrocket-Module/refs/heads/main/Module/VSCO%20Premium.module,timeout=10,tag=üåå VSCO

# ==================== UTILITIES ====================
truecaller-premium = type=http-response,pattern=^https:\/\/premium.*\.truecaller\.com\/v1\/subscriptions,requires-body=1,script-path=https://raw.githubusercontent.com/NightmarketServer/Shadowrocket-Module/main/Module/TrueCaller.module,timeout=10,tag=üìû Truecaller

wink-premium = type=http-response,pattern=^https:\/\/api-sub\.meitu\.com\/v2\/user\/vip_info,requires-body=1,script-path=https://raw.githubusercontent.com/NightmarketServer/Shadowrocket-Module/refs/heads/main/Module/VIP%20Wink.module,timeout=10,tag=üí´ Wink

alight-premium = type=http-response,pattern=^https:\/\/us-central1-alight-creative\.cloudfunctions\.net\/getAccountStatus,requires-body=1,script-path=https://raw.githubusercontent.com/NightmarketServer/Shadowrocket-Module/refs/heads/main/Module/Alight%20Motion.module,timeout=10,tag=üé¨ Alight Motion

vivacut-premium = type=http-response,pattern=^https:\/\/medi\.dxzzy321\.top\/api\/rest\/commerce\/integrate\/vip,requires-body=1,script-path=https://raw.githubusercontent.com/NightmarketServer/Shadowrocket-Module/refs/heads/main/Module/Vivacut.module,timeout=10,tag=‚úÇÔ∏è Vivacut

# ==================== OTHER APPS ====================
bilibili-premium = type=http-response,pattern=^https:\/\/api\.bilibili\.com\/x\/vip,requires-body=1,script-path=https://raw.githubusercontent.com/NightmarketServer/Shadowrocket-Module/refs/heads/main/Module/Bilibili.module,timeout=10,tag=üéÆ Bilibili

ezviz-premium = type=http-response,pattern=^https:\/\/api\.ezvizlife\.com\/api\/user\/vip,requires-body=1,script-path=https://raw.githubusercontent.com/NightmarketServer/Shadowrocket-Module/refs/heads/main/Module/Ezviz.module,timeout=10,tag=üìπ Ezviz

locket-premium = type=http-response,pattern=^https:\/\/api\.revenuecat\.com\/v1\/subscribers.*locket,requires-body=1,script-path=https://raw.githubusercontent.com/NightmarketServer/Locket/refs/heads/main/Locketgold-V10.module,timeout=10,tag=üîê Locket

# ==================== UNIVERSAL AD BLOCK ====================
# Ch·∫∑n qu·∫£ng c√°o to√†n di·ªán
universal-ads = type=http-response,pattern=^https?:\/\/.*\.(googlesyndication|doubleclick|googleadservices|facebook\.com\/ad|adsystem)\.com\/.*,requires-body=1,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/shadowrocket/ads/ads.sgmodule,timeout=5,tag=üö´ Universal Ads

[Rule]
# ========== CH·∫∂N QU·∫¢NG C√ÅO TR∆Ø·ªöC TI√äN ==========
# Google Ads
DOMAIN-SUFFIX,doubleclick.net,REJECT
DOMAIN-SUFFIX,googleadservices.com,REJECT
DOMAIN-SUFFIX,googlesyndication.com,REJECT
DOMAIN-SUFFIX,google-analytics.com,REJECT

# Facebook Ads
DOMAIN-SUFFIX,fbcdn.net,REJECT
DOMAIN-SUFFIX,fbsbx.com,REJECT
DOMAIN-KEYWORD,facebook,REJECT

# Video Ads
DOMAIN-SUFFIX,adsymptotic.com,REJECT
DOMAIN-SUFFIX,adnxs.com,REJECT
DOMAIN-SUFFIX,applovin.com,REJECT
DOMAIN-SUFFIX,unity3d.com,REJECT

# Tracking
DOMAIN-SUFFIX,adjust.com,REJECT
DOMAIN-SUFFIX,branch.io,REJECT
DOMAIN-SUFFIX,appsflyer.com,REJECT

# ========== C√ÅC ·ª®NG D·ª§NG PREMIUM ==========
# YouTube
DOMAIN-SUFFIX,youtube.com,DIRECT
DOMAIN-SUFFIX,ytimg.com,DIRECT
DOMAIN-SUFFIX,youtu.be,DIRECT
AND,((DOMAIN-SUFFIX,googlevideo.com), (PROTOCOL,UDP)),REJECT

# Spotify
DOMAIN,spclient.wg.spotify.com,DIRECT
DOMAIN-SUFFIX,spotify.com,DIRECT
DOMAIN-SUFFIX,scdn.co,DIRECT

# SoundCloud
DOMAIN-SUFFIX,soundcloud.com,DIRECT

# RevenueCat (cho premium unlock)
DOMAIN-SUFFIX,revenuecat.com,DIRECT

# Apple Services (quan tr·ªçng cho m·∫°ng)
DOMAIN-SUFFIX,apple.com,DIRECT
DOMAIN-SUFFIX,icloud.com,DIRECT
DOMAIN-SUFFIX,appstore.com,DIRECT

# C√°c d·ªãch v·ª• kh√°c
DOMAIN-SUFFIX,picsart.com,DIRECT
DOMAIN-SUFFIX,vsco.co,DIRECT
DOMAIN-SUFFIX,truecaller.com,DIRECT
DOMAIN-SUFFIX,meitu.com,DIRECT
DOMAIN-SUFFIX,bilibili.com,DIRECT
DOMAIN-SUFFIX,ezvizlife.com,DIRECT

# DNS t·ªëc ƒë·ªô cao
DOMAIN-SUFFIX,cloudflare.com,DIRECT
DOMAIN-SUFFIX,akamai.net,DIRECT

# ========== QUAN TR·ªåNG: LU√îN C√ì M·∫†NG ==========
# LAN
IP-CIDR,192.168.0.0/16,DIRECT
IP-CIDR,10.0.0.0/8,DIRECT
IP-CIDR,172.16.0.0/12,DIRECT

# GeoIP
GEOIP,CN,DIRECT

# Final - LU√îN ƒë·ªÉ DIRECT ƒë·ªÉ c√≥ m·∫°ng
FINAL,DIRECT

[URL Rewrite]
# ========== YOUTUBE AD BLOCK ==========
# Ch·∫∑n t·∫•t c·∫£ qu·∫£ng c√°o YouTube
^https?:\/\/[\w-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&(oad|ctier) _ reject-200
^https?:\/\/(www|s)\.youtube\.com\/api\/stats\/ads _ reject-200
^https?:\/\/(www|s)\.youtube\.com\/(pagead|ptracking) _ reject-200
^https?:\/\/s\.youtube\.com\/api\/stats\/qoe\?adcontext _ reject-200

# YouTube Premium features
^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(log_event|ads) _ reject-200

# ========== SPOTIFY ADS ==========
^https?:\/\/spclient\.wg\.spotify\.com\/ads\/ _ reject-200
^https?:\/\/api\.spotify\.com\/v1\/ads\/ _ reject-200

# ========== GENERAL ADS ==========
^https?:\/\/.*\.facebook\.com\/.*ad.* _ reject-200
^https?:\/\/.*\.google\.com\/.*pagead.* _ reject-200
^https?:\/\/.*\.doubleclick\.net\/.* _ reject-200

# ========== PERFORMANCE ==========
# Gi·∫£m tracking
^https?:\/\/.*\.googleapis\.com\/generate_204 _ reject-200

[Map Local]
# Response cho YouTube Premium
^https?:\/\/[\w-]+\.googlevideo\.com\/initplayback.+&oad data-type=application/json data='{"playerResponse":{"playabilityStatus":{"status":"OK"},"videoDetails":{"isLiveContent":false},"streamingData":{"formats":[],"adaptiveFormats":[]},"playerAds":[],"adPlacements":[]}}' status-code=200
